# データベース README

このフォルダには、データベーススキーマとサンプルデータのSQLファイルが含まれています。

## ファイル一覧

### スキーマファイル

- **`schema-multi-shop.sql`** - 完全統合スキーマ（**推奨・必須**）
  - 基本テーブル: shops, users, menus, orders, order_items, payments
  - 追加テーブル: shop_tables, visitors, shop_categories, error_logs, password_reset_tokens, shop_users
  - すべてのテーブル定義が1つのファイルに統合されています
  - **`shop_users`テーブルも含まれています**（複数店舗オーナー対応）

### サンプルデータ

- **`sample-data.sql`** - 完全統合サンプルデータ（**推奨・必須**）
  - **ユーザー**: 7人（admin, owner_multi, owner_sakura, manager_beef, staff_mamma, owner_premium, seki）
  - **ダミースタッフ**: 19人（各店舗に2-3人のスタッフ）
  - **店舗**: 8店舗
  - **メニュー**: 100点
  - **カテゴリ**: 日本語ラベル付き
  - **テーブル（座席）**: 95テーブル（各店舗に8-18席、QRコードURL付き）
  - **営業時間・定休日**: 各店舗の営業時間と定休日設定
  - **来店者データ**: 4件（支払い完了/待ちのサンプル）
  - **注文データ**: 3件（各種ステータスのサンプル）
  - **注文アイテム**: 7件
  - **エラーログサンプル**: テスト用のエラーログデータ（error_logsテーブルが存在する場合のみ）
  
  **全ユーザー・スタッフのパスワード**: `password123`

## セットアップ手順

### 1. 新規セットアップ（推奨）

```sql
-- 1. 完全統合スキーマを実行（すべてのテーブルが作成されます）
-- shop_usersテーブルも含まれています）
SOURCE schema-multi-shop.sql;

-- 2. サンプルデータを挿入（すべてのデータが含まれています）
SOURCE sample-data.sql;
```

### 2. 既存データベースからの移行

既存のデータベースがある場合は、`schema-multi-shop.sql`を実行してから、必要に応じて各テーブル作成ファイルと`sample-data.sql`を実行してください。

## サンプルデータの内容

### ユーザー（7人）

1. **admin** - システム管理者（全店舗にアクセス可能）
2. **seki** - 管理者（全店舗にアクセス可能）
3. **owner_multi** - 複数店舗オーナー（shop001, shop002）
4. **owner_sakura** - 和食店オーナー（shop003）
5. **manager_beef** - バーガーショップマネージャー（shop004）
6. **staff_mamma** - パスタハウススタッフ（shop005）
7. **owner_premium** - 複数店舗オーナー（shop006, shop007, shop008）

**全ユーザーのパスワード**: `password123`

### ダミースタッフ（19人）

`sample-data.sql`には、各店舗に以下のスタッフが含まれています：

- **shop001**: 3人（佐々木 健太、高橋 美咲、中村 翔太）
- **shop002**: 2人（渡辺 さくら、伊藤 大輔）
- **shop003**: 3人（山本 優香、松本 健一、井上 麻衣）
- **shop004**: 2人（木村 拓也、林 由美）
- **shop005**: 2人（斎藤 真一、加藤 愛美）
- **shop006**: 3人（吉田 雄一、後藤 美穂、近藤 翔）
- **shop007**: 2人（長谷川 誠、橋本 彩）
- **shop008**: 2人（石川 美咲、前田 健太）

**全スタッフのパスワード**: `password123`

### 店舗（8店舗）

1. **shop001**: レストラン イタリアン（15メニュー）
2. **shop002**: カフェ モカ（12メニュー）
3. **shop003**: 和食 さくら（13メニュー）
4. **shop004**: バーガーショップ ビーフ（13メニュー）
5. **shop005**: パスタハウス マンマ（12メニュー）
6. **shop006**: ステーキハウス プレミアム（13メニュー）
7. **shop007**: ラーメン屋 こだわり（11メニュー）
8. **shop008**: スイーツカフェ スイート（11メニュー）

**合計**: 100メニュー

### メニューの内訳

- **フード**: 約70点
- **ドリンク**: 約20点
- **デザート**: 約10点

### カテゴリ

各店舗には日本語ラベルのカテゴリが設定されています：
- **shop001**: 食べ物、飲み物、デザート
- **shop002**: ドリンク、軽食、スイーツ
- **shop003**: 和食、飲み物、和菓子
- **shop004**: バーガー、ドリンク、デザート
- **shop005**: パスタ、ドリンク、デザート
- **shop006**: ステーキ、ドリンク、デザート
- **shop007**: ラーメン、ドリンク
- **shop008**: スイーツ、ドリンク

## 注意事項

- サンプルデータを実行する前に、既存のデータをバックアップしてください
- 本番環境では、必ずパスワードを変更してください
- サンプルデータは開発・テスト環境でのみ使用してください

## 関連ドキュメント

- [管理画面アカウント情報](../ACCOUNT_INFO.md)
- [複数店舗オーナー機能](../MULTI_SHOP_OWNER.md)
- [APIサーバー README](../api-server/README.md)
